{
  "name": "极简画板",
  "desc": "简单的鼠标滑板，支持导出png",
  "tags": ["html", "draw"],
  "config": "{\"text\":\"<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n<meta charset=\\\"UTF-8\\\">\\n<meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1.0\\\">\\n<title>画板</title>\\n<style>\\n  html, body { margin:0; padding:0; height:100%; overflow:hidden; background:#f0f0f0; }\\n  #toolbar {\\n    position: fixed;\\n    top: 10px; left: 50%; transform: translateX(-50%);\\n    background: rgba(255,255,255,0.9);\\n    border-radius: 8px;\\n    padding: 5px 10px;\\n    display: flex;\\n    gap: 8px;\\n    z-index: 10;\\n    box-shadow: 0 2px 6px rgba(0,0,0,0.2);\\n  }\\n  #toolbar button { padding: 6px 10px; border:none; border-radius:4px; cursor:pointer; }\\n  #toolbar button.active { box-shadow: 0 0 0 2px #000 inset; }\\n  #colorPicker { width: 32px; height:32px; border:none; padding:0; cursor:pointer; }\\n  canvas { display:block; width:100%; height:100%; background:#f0f0f0; }\\n</style>\\n</head>\\n<body>\\n  <div id=\\\"toolbar\\\">\\n    <input type=\\\"color\\\" id=\\\"colorPicker\\\" value=\\\"#000000\\\">\\n    <button id=\\\"eraser\\\">橡皮擦</button>\\n    <button id=\\\"clear\\\">清空</button>\\n    <button id=\\\"export\\\">导出 PNG</button>\\n  </div>\\n  <canvas id=\\\"canvas\\\"></canvas>\\n\\n<script>\\nconst canvas = document.getElementById('canvas');\\nconst ctx = canvas.getContext('2d');\\n\\nfunction resizeCanvas() {\\n  canvas.width = window.innerWidth;\\n  canvas.height = window.innerHeight;\\n}\\nwindow.addEventListener('resize', resizeCanvas);\\nresizeCanvas();\\n\\n// 状态\\nlet drawing = false;\\nlet currentColor = '#000000';\\nlet brushSize = 4;\\nlet erasing = false;\\n\\n// 工具按钮\\nconst colorPicker = document.getElementById('colorPicker');\\nconst eraserBtn = document.getElementById('eraser');\\nconst clearBtn = document.getElementById('clear');\\nconst exportBtn = document.getElementById('export');\\n\\ncolorPicker.addEventListener('input', (e) => {\\n  currentColor = e.target.value;\\n  erasing = false;\\n  eraserBtn.classList.remove('active');\\n});\\n\\neraserBtn.addEventListener('click', () => {\\n  erasing = true;\\n  eraserBtn.classList.add('active');\\n});\\n\\nclearBtn.addEventListener('click', () => {\\n  ctx.clearRect(0,0,canvas.width,canvas.height);\\n});\\n\\n// 导出 PNG\\nexportBtn.addEventListener('click', () => {\\n  const link = document.createElement('a');\\n  link.download = 'canvas.png';\\n  link.href = canvas.toDataURL('image/png');\\n  link.click();\\n});\\n\\n// 绘画事件\\nfunction startDraw(e) {\\n  drawing = true;\\n  draw(e);\\n}\\nfunction stopDraw() {\\n  drawing = false;\\n  ctx.beginPath();\\n  ctx.lastPos = null; // 清空上一次位置\\n}\\nfunction draw(e) {\\n  if(!drawing) return;\\n  ctx.lineCap = 'round';\\n  ctx.lineJoin = 'round';\\n  ctx.lineWidth = brushSize;\\n  ctx.strokeStyle = currentColor;\\n  \\n  let x, y;\\n  if(e.touches && e.touches.length > 0){\\n    x = e.touches[0].clientX;\\n    y = e.touches[0].clientY;\\n  } else {\\n    x = e.clientX;\\n    y = e.clientY;\\n  }\\n\\n  if(!ctx.lastPos){\\n    ctx.lastPos = {x,y};\\n    return;\\n  }\\n\\n  ctx.beginPath();\\n  if(erasing){\\n    // 使用 clearRect 擦除画布区域，避免背景色差\\n    const size = brushSize;\\n    ctx.clearRect(x-size/2, y-size/2, size, size);\\n  } else {\\n    ctx.moveTo(ctx.lastPos.x, ctx.lastPos.y);\\n    ctx.lineTo(x, y);\\n    ctx.strokeStyle = currentColor;\\n    ctx.stroke();\\n  }\\n  \\n  ctx.lastPos = {x,y};\\n}\\n\\n// 鼠标事件\\ncanvas.addEventListener('mousedown', startDraw);\\ncanvas.addEventListener('mousemove', draw);\\ncanvas.addEventListener('mouseup', stopDraw);\\ncanvas.addEventListener('mouseleave', stopDraw);\\n\\n// 触摸事件\\ncanvas.addEventListener('touchstart', startDraw, {passive:false});\\ncanvas.addEventListener('touchmove', draw, {passive:false});\\ncanvas.addEventListener('touchend', stopDraw);\\ncanvas.addEventListener('touchcancel', stopDraw);\\n\\n// 防止滚动\\ndocument.body.addEventListener('touchmove', e => { if(e.target===canvas) e.preventDefault(); }, {passive:false});\\n</script>\\n</body>\\n</html>\\n\",\"params\":[]}",
  "w": 14,
  "h": 26,
  "type": "html"
}